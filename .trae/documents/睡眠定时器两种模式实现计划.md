# 睡眠定时器两种模式实现计划

## 需求分析
当前睡眠定时器只有间隔时间模式，需要新增时间点模式，用户可以选择具体的睡眠时间点，并支持不同的重复模式（工作日、周末、每天、当天一次）。

## 实现方案

### 1. 修改 SleepContext.js
- 添加 `timerMode` 状态，支持 `"interval"` 和 `"timePoint"` 两种模式
- 添加 `targetTime` 状态，存储用户选择的时间点（格式：HH:MM）
- 添加 `repeatMode` 状态，支持 `"once"`、`"daily"`、`"weekdays"`、`"weekends"` 四种重复模式
- 修改计时器逻辑，支持根据时间点和重复模式计算剩余时间
- 新增 `setTimePoint` 方法，设置目标时间点
- 新增 `setTimerMode` 方法，切换定时模式
- 新增 `setRepeatMode` 方法，设置重复模式

### 2. 修改 SleepTimerScreen.js
- 添加模式切换选项卡，区分间隔时间模式和时间点模式
- 当选择时间点模式时，显示：
  - 时间选择器（用于选择具体时间点）
  - 重复模式选择（每天、工作日、周末、当天一次）
- 调整 UI 布局，支持两种模式的切换
- 更新信息面板，显示当前模式和重复设置

### 3. 核心逻辑实现
- 当切换到时间点模式时，根据当前时间、目标时间和重复模式计算剩余时间
- 实现重复模式的日期判断逻辑
- 保持原有间隔时间模式的功能不变
- 确保两种模式的计时器逻辑正确

## 实现步骤

1. **修改 SleepContext.js**：
   - 添加状态变量：timerMode, targetTime, repeatMode
   - 修改计时器逻辑，支持时间点模式和重复计算
   - 新增方法：setTimePoint, setTimerMode, setRepeatMode

2. **修改 SleepTimerScreen.js**：
   - 添加模式切换选项卡
   - 为时间点模式添加时间选择器和重复模式选择
   - 调整控制逻辑，支持两种模式
   - 更新信息显示

3. **测试功能**：
   - 确保两种模式都能正常工作
   - 测试不同重复模式的准确性
   - 测试模式切换时的状态管理
   - 测试计时器的准确性

## 预期效果
用户可以在两种定时模式之间切换：
- **间隔时间模式**：选择倒计时分钟数（如30分钟后提醒）
- **时间点模式**：选择具体的时间点（如晚上10:30），并设置重复模式（每天、工作日、周末或当天一次）

界面简洁直观，模式切换流畅，计时器功能准确可靠，重复模式逻辑正确。